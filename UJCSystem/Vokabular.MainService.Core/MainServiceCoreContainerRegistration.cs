using AutoMapper;
using Microsoft.Extensions.DependencyInjection;
using Vokabular.Core;
using Vokabular.MainService.Core.AutoMapperProfiles;
using Vokabular.MainService.Core.AutoMapperProfiles.Authentication;
using Vokabular.MainService.Core.AutoMapperProfiles.CardFile;
using Vokabular.MainService.Core.Communication;
using Vokabular.MainService.Core.Managers;
using Vokabular.MainService.Core.Managers.Authentication;
using Vokabular.MainService.Core.Managers.Fulltext;
using Vokabular.MainService.Core.Utils;
using Vokabular.Shared.Container;
using Vokabular.TextConverter;

namespace Vokabular.MainService.Core
{
    public class MainServiceCoreContainerRegistration : IContainerInstaller
    {
        public void Install(IServiceCollection services)
        {
            services.AddScoped<AuthenticationManager>();
            services.AddScoped<AuthorizationManager>();
            services.AddScoped<BookHitSearchManager>();
            services.AddScoped<BookManager>();
            services.AddScoped<BookSearchManager>();
            services.AddScoped<CardFileManager>();
            services.AddScoped<CatalogValueManager>();
            services.AddScoped<CategoryManager>();
            services.AddScoped<CorpusSearchManager>();
            services.AddScoped<EditionNoteManager>();
            services.AddScoped<FavoriteManager>();
            services.AddScoped<FeedbackManager>();
            services.AddScoped<ForumSiteManager>();
            services.AddScoped<HeadwordSearchManager>();
            services.AddScoped<NamedResourceGroupManager>();
            services.AddScoped<NewsManager>();
            services.AddScoped<PermissionManager>();
            services.AddScoped<PersonManager>();
            services.AddScoped<ProjectContentManager>();
            services.AddScoped<ProjectInfoManager>();
            services.AddScoped<ProjectItemManager>();
            services.AddScoped<ProjectManager>();
            services.AddScoped<ProjectMetadataManager>();
            services.AddScoped<ProjectResourceManager>();
            services.AddScoped<ResourceManager>();
            services.AddScoped<RoleManager>();
            services.AddScoped<SnapshotManager>();
            services.AddScoped<TermManager>();
            services.AddScoped<UserDetailManager>();
            services.AddScoped<UserManager>();

            services.AddScoped<CommunicationConfigurationProvider>();
            services.AddScoped<CommunicationProvider>();
            services.AddScoped<DefaultUserProvider>();
            services.AddScoped<FulltextStorageProvider>();
            services.AddScoped<IFulltextStorage, ExistDbStorage>();
            services.AddScoped<IFulltextStorage, ElasticSearchStorage>();
            services.AddScoped<PortalTypeProvider>();

            services.AddScoped<ProjectPermissionConverter>();

            services.AddSingleton<Profile, AuthUserProfile>();
            services.AddSingleton<Profile, RoleProfile>();
            services.AddSingleton<Profile, PermissionProfile>();

            services.AddSingleton<Profile, AudioProfile>();
            services.AddSingleton<Profile, BasicBookProfile>();
            services.AddSingleton<Profile, BookProfile>();
            services.AddSingleton<Profile, BookTypeProfile>();
            services.AddSingleton<Profile, CategoryProfile>();
            services.AddSingleton<Profile, ChapterProfile>();
            services.AddSingleton<Profile, EditionNoteProfile>();
            services.AddSingleton<Profile, FavoriteLabelProfile>();
            services.AddSingleton<Profile, FavoriteProfile>();
            services.AddSingleton<Profile, FeedbackProfile>();
            services.AddSingleton<Profile, ForumProfile>();
            services.AddSingleton<Profile, HeadwordProfile>();
            services.AddSingleton<Profile, ImageProfile>();
            services.AddSingleton<Profile, KeywordProfile>();
            services.AddSingleton<Profile, LiteraryGenreProfile>();
            services.AddSingleton<Profile, LiteraryKindProfile>();
            services.AddSingleton<Profile, LiteraryOriginalProfile>();
            services.AddSingleton<Profile, MetadataProfile>();
            services.AddSingleton<Profile, NamedResourceGroupProfile>();
            services.AddSingleton<Profile, NewsProfile>();
            services.AddSingleton<Profile, OriginalAuthorProfile>();
            services.AddSingleton<Profile, PageProfile>();
            services.AddSingleton<Profile, ProjectProfile>();
            services.AddSingleton<Profile, ProjectPermissionProfile>();
            services.AddSingleton<Profile, ResourceProfile>();
            services.AddSingleton<Profile, ResourceVersionProfile>();
            services.AddSingleton<Profile, ResponsiblePersonProfile>();
            services.AddSingleton<Profile, SnapshotProfile>();
            services.AddSingleton<Profile, TermProfile>();
            services.AddSingleton<Profile, TextCommentProfile>();
            services.AddSingleton<Profile, TextProfile>();
            services.AddSingleton<Profile, TrackProfile>();
            services.AddSingleton<Profile, TransformationProfile>();
            services.AddSingleton<Profile, UserContactProfile>();
            services.AddSingleton<Profile, UserProfile>();

            services.AddSingleton<Profile, BucketContractProfile>();
            services.AddSingleton<Profile, BucketShortContractProfile>();
            services.AddSingleton<Profile, CardContractProfile>();
            services.AddSingleton<Profile, CardFileContractProfile>();
            services.AddSingleton<Profile, CardImageContractProfile>();
            services.AddSingleton<Profile, CardShortContractProfile>();

            new CoreContainerRegistration().Install(services);
            services.AddTextConverterServices();
        }
    }
}
