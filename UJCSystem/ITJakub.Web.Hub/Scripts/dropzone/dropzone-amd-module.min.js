(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){function t(n){if(n)return r(n)}function r(n){for(var i in t.prototype)n[i]=t.prototype[i];return n}var i={exports:{}};return i.exports=t,t.prototype.on=t.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks[n]=this._callbacks[n]||[]).push(t),this},t.prototype.once=function(n,t){function i(){r.off(n,i);t.apply(this,arguments)}var r=this;this._callbacks=this._callbacks||{};i.fn=t;this.on(n,i);return this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(n,t){var i,u,r;if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;if(i=this._callbacks[n],!i)return this;if(1==arguments.length)return delete this._callbacks[n],this;for(r=0;r<i.length;r++)if(u=i[r],u===t||u.fn===t){i.splice(r,1);break}return this},t.prototype.emit=function(n){var r,t,i,u;if(this._callbacks=this._callbacks||{},r=[].slice.call(arguments,1),t=this._callbacks[n],t)for(t=t.slice(0),i=0,u=t.length;i<u;++i)t[i].apply(this,r);return this},t.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks[n]||[]},t.prototype.hasListeners=function(n){return!!this.listeners(n).length},function(){var r,f,e,o,s,h,u,c,l={}.hasOwnProperty,a=function(n,t){function r(){this.constructor=n}for(var i in t)l.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},v=[].slice;f=typeof t!="undefined"&&t!==null?t:require("emitter");u=function(){};r=function(n){function t(n,r){var f,u,e;if(this.element=n,this.version=t.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],typeof this.element=="string"&&(this.element=document.querySelector(this.element)),!(this.element&&this.element.nodeType!=null))throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(t.instances.push(this),this.element.dropzone=this,f=(e=t.optionsForElement(this.element))!=null?e:{},this.options=i({},this.defaultOptions,f,r!=null?r:{}),this.options.forceFallback||!t.isBrowserSupported())return this.options.fallback.call(this);if(this.options.url==null&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes);this.options.method=this.options.method.toUpperCase();(u=this.getExistingFallback())&&u.parentNode&&u.parentNode.removeChild(u);this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?t.getElement(this.options.previewsContainer,"previewsContainer"):this.element);this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:t.getElements(this.options.clickable,"clickable"));this.init()}var i;return a(t,n),t.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"],t.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(n,t){return t()},init:function(){return u},forceFallback:!1,fallback:function(){var i,n,u,r,e,f;for(this.element.className=""+this.element.className+" dz-browser-not-supported",f=this.element.getElementsByTagName("div"),r=0,e=f.length;r<e;r++)if(i=f[r],/(^| )dz-message($| )/.test(i.className)){n=i;i.className="dz-message";continue}return n||(n=t.createElement('<div class="dz-message"><span><\/span><\/div>'),this.element.appendChild(n)),u=n.getElementsByTagName("span")[0],u&&(u.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(n){var t,i,r;return t={srcX:0,srcY:0,srcWidth:n.width,srcHeight:n.height},i=n.width/n.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,t.optWidth==null&&t.optHeight==null?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):t.optWidth==null?t.optWidth=i*t.optHeight:t.optHeight==null&&(t.optHeight=1/i*t.optWidth),r=t.optWidth/t.optHeight,n.height<t.optHeight||n.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):i>r?(t.srcHeight=n.height,t.srcWidth=t.srcHeight*r):(t.srcWidth=n.width,t.srcHeight=t.srcWidth/r),t.srcX=(n.width-t.srcWidth)/2,t.srcY=(n.height-t.srcHeight)/2,t},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:u,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:u,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(n){var i,c,l,r,u,f,a,v,y,e,o,s,h;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(n.previewElement=t.createElement(this.options.previewTemplate.trim()),n.previewTemplate=n.previewElement,this.previewsContainer.appendChild(n.previewElement),e=n.previewElement.querySelectorAll("[data-dz-name]"),r=0,a=e.length;r<a;r++)i=e[r],i.textContent=n.name;for(o=n.previewElement.querySelectorAll("[data-dz-size]"),u=0,v=o.length;u<v;u++)i=o[u],i.innerHTML=this.filesize(n.size);for(this.options.addRemoveLinks&&(n._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"<\/a>"),n.previewElement.appendChild(n._removeLink)),c=function(i){return function(r){return r.preventDefault(),r.stopPropagation(),n.status===t.UPLOADING?t.confirm(i.options.dictCancelUploadConfirmation,function(){return i.removeFile(n)}):i.options.dictRemoveFileConfirmation?t.confirm(i.options.dictRemoveFileConfirmation,function(){return i.removeFile(n)}):i.removeFile(n)}}(this),s=n.previewElement.querySelectorAll("[data-dz-remove]"),h=[],f=0,y=s.length;f<y;f++)l=s[f],h.push(l.addEventListener("click",c));return h}},removedfile:function(n){var t;return n.previewElement&&(t=n.previewElement)!=null&&t.parentNode.removeChild(n.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(n,t){var r,i,e,u,f;if(n.previewElement){for(n.previewElement.classList.remove("dz-file-preview"),n.previewElement.classList.add("dz-image-preview"),u=n.previewElement.querySelectorAll("[data-dz-thumbnail]"),f=[],i=0,e=u.length;i<e;i++)r=u[i],r.alt=n.name,f.push(r.src=t);return f}},error:function(n,t){var f,i,e,r,u;if(n.previewElement){for(n.previewElement.classList.add("dz-error"),typeof t!="String"&&t.error&&(t=t.error),r=n.previewElement.querySelectorAll("[data-dz-errormessage]"),u=[],i=0,e=r.length;i<e;i++)f=r[i],u.push(f.textContent=t);return u}},errormultiple:u,processing:function(n){if(n.previewElement&&(n.previewElement.classList.add("dz-processing"),n._removeLink))return n._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:u,uploadprogress:function(n,t){var f,i,e,r,u;if(n.previewElement){for(r=n.previewElement.querySelectorAll("[data-dz-uploadprogress]"),u=[],i=0,e=r.length;i<e;i++)f=r[i],u.push(f.style.width=""+t+"%");return u}},totaluploadprogress:u,sending:u,sendingmultiple:u,success:function(n){if(n.previewElement)return n.previewElement.classList.add("dz-success")},successmultiple:u,canceled:function(n){return this.emit("error",n,"Upload canceled.")},canceledmultiple:u,complete:function(n){if(n._removeLink)return n._removeLink.textContent=this.options.dictRemoveFile},completemultiple:u,maxfilesexceeded:u,maxfilesreached:u,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name><\/span><\/div>\n    <div class="dz-size" data-dz-size><\/div>\n    <img data-dz-thumbnail />\n  <\/div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress><\/span><\/div>\n  <div class="dz-success-mark"><span>✔<\/span><\/div>\n  <div class="dz-error-mark"><span>✘<\/span><\/div>\n  <div class="dz-error-message"><span data-dz-errormessage><\/span><\/div>\n<\/div>'},i=function(){var t,i,r,u,f,n,e;for(u=arguments[0],r=2<=arguments.length?v.call(arguments,1):[],n=0,e=r.length;n<e;n++){i=r[n];for(t in i)f=i[t],u[t]=f}return u},t.prototype.getAcceptedFiles=function(){var t,n,u,i,r;for(i=this.files,r=[],n=0,u=i.length;n<u;n++)t=i[n],t.accepted&&r.push(t);return r},t.prototype.getRejectedFiles=function(){var t,n,u,i,r;for(i=this.files,r=[],n=0,u=i.length;n<u;n++)t=i[n],t.accepted||r.push(t);return r},t.prototype.getFilesWithStatus=function(n){var i,t,f,r,u;for(r=this.files,u=[],t=0,f=r.length;t<f;t++)i=r[t],i.status===n&&u.push(i);return u},t.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(t.QUEUED)},t.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(t.UPLOADING)},t.prototype.getActiveFiles=function(){var n,i,f,r,u;for(r=this.files,u=[],i=0,f=r.length;i<f;i++)n=r[i],(n.status===t.UPLOADING||n.status===t.QUEUED)&&u.push(n);return u},t.prototype.init=function(){var r,n,u,i,e,o,f;for(this.element.tagName==="form"&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"<\/span><\/div>")),this.clickableElements.length&&(u=function(n){return function(){return n.hiddenFileInput&&document.body.removeChild(n.hiddenFileInput),n.hiddenFileInput=document.createElement("input"),n.hiddenFileInput.setAttribute("type","file"),(n.options.maxFiles==null||n.options.maxFiles>1)&&n.hiddenFileInput.setAttribute("multiple","multiple"),n.hiddenFileInput.className="dz-hidden-input",n.options.acceptedFiles!=null&&n.hiddenFileInput.setAttribute("accept",n.options.acceptedFiles),n.hiddenFileInput.style.visibility="hidden",n.hiddenFileInput.style.position="absolute",n.hiddenFileInput.style.top="0",n.hiddenFileInput.style.left="0",n.hiddenFileInput.style.height="0",n.hiddenFileInput.style.width="0",document.body.appendChild(n.hiddenFileInput),n.hiddenFileInput.addEventListener("change",function(){var r,t,i,f;if(t=n.hiddenFileInput.files,t.length)for(i=0,f=t.length;i<f;i++)r=t[i],n.addFile(r);return u()})}}(this),u()),this.URL=(o=window.URL)!=null?o:window.webkitURL,f=this.events,i=0,e=f.length;i<e;i++){r=f[i];this.on(r,this.options[r])}this.on("uploadprogress",function(n){return function(){return n.updateTotalUploadProgress()}}(this));this.on("removedfile",function(n){return function(){return n.updateTotalUploadProgress()}}(this));this.on("canceled",function(n){return function(t){return n.emit("complete",t)}}(this));this.on("complete",function(n){return function(){if(n.getUploadingFiles().length===0&&n.getQueuedFiles().length===0)return setTimeout(function(){return n.emit("queuecomplete")},0)}}(this));return n=function(n){return n.stopPropagation(),n.preventDefault?n.preventDefault():n.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(n){return function(t){return n.emit("dragstart",t)}}(this),dragenter:function(t){return function(i){return n(i),t.emit("dragenter",i)}}(this),dragover:function(t){return function(i){var r;try{r=i.dataTransfer.effectAllowed}catch(u){}return i.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy",n(i),t.emit("dragover",i)}}(this),dragleave:function(n){return function(t){return n.emit("dragleave",t)}}(this),drop:function(t){return function(i){return n(i),t.drop(i)}}(this),dragend:function(n){return function(t){return n.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(n){return function(i){return n.listeners.push({element:i,events:{click:function(r){if(i!==n.element||r.target===n.element||t.elementInside(r.target,n.element.querySelector(".dz-message")))return n.hiddenFileInput.click()}}})}}(this)),this.enable(),this.options.init.call(this)},t.prototype.destroy=function(){var n;return this.disable(),this.removeAllFiles(!0),((n=this.hiddenFileInput)!=null?n.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)},t.prototype.updateTotalUploadProgress=function(){var e,r,n,t,u,i,o,f;if(t=0,n=0,e=this.getActiveFiles(),e.length){for(f=this.getActiveFiles(),i=0,o=f.length;i<o;i++)r=f[i],t+=r.upload.bytesSent,n+=r.upload.total;u=100*t/n}else u=100;return this.emit("totaluploadprogress",u,n,t)},t.prototype._getParamName=function(n){return typeof this.options.paramName=="function"?this.options.paramName(n):""+this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"")},t.prototype.getFallbackForm=function(){var u,r,n,i;return(u=this.getExistingFallback())?u:(n='<div class="dz-fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"<\/p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"><\/div>',r=t.createElement(n),this.element.tagName!=="FORM"?(i=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"><\/form>'),i.appendChild(r)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),i!=null?i:r)},t.prototype.getExistingFallback=function(){var i,r,u,n,f,t;for(r=function(n){for(var i,t=0,r=n.length;t<r;t++)if(i=n[t],/(^| )fallback($| )/.test(i.className))return i},t=["div","form"],n=0,f=t.length;n<f;n++)if(u=t[n],i=r(this.element.getElementsByTagName(u)))return i},t.prototype.setupEventListeners=function(){var t,i,f,n,e,r,u;for(r=this.listeners,u=[],n=0,e=r.length;n<e;n++)t=r[n],u.push(function(){var n,r;n=t.events;r=[];for(i in n)f=n[i],r.push(t.element.addEventListener(i,f,!1));return r}());return u},t.prototype.removeEventListeners=function(){var t,i,f,n,e,r,u;for(r=this.listeners,u=[],n=0,e=r.length;n<e;n++)t=r[n],u.push(function(){var n,r;n=t.events;r=[];for(i in n)f=n[i],r.push(t.element.removeEventListener(i,f,!1));return r}());return u},t.prototype.disable=function(){var r,n,u,t,i;for(this.clickableElements.forEach(function(n){return n.classList.remove("dz-clickable")}),this.removeEventListeners(),t=this.files,i=[],n=0,u=t.length;n<u;n++)r=t[n],i.push(this.cancelUpload(r));return i},t.prototype.enable=function(){return this.clickableElements.forEach(function(n){return n.classList.add("dz-clickable")}),this.setupEventListeners()},t.prototype.filesize=function(n){var t;return n>=1099511627776/10?(n=n/(1099511627776/10),t="TiB"):n>=1073741824/10?(n=n/(1073741824/10),t="GiB"):n>=1048576/10?(n=n/(1048576/10),t="MiB"):n>=1024/10?(n=n/(1024/10),t="KiB"):(n=n*10,t="b"),"<strong>"+Math.round(n)/10+"<\/strong> "+t},t.prototype._updateMaxFilesReachedClass=function(){return this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},t.prototype.drop=function(n){var i,t;n.dataTransfer&&(this.emit("drop",n),i=n.dataTransfer.files,i.length&&(t=n.dataTransfer.items,t&&t.length&&t[0].webkitGetAsEntry!=null?this._addFilesFromItems(t):this.handleFiles(i)))},t.prototype.paste=function(n){var t,i;if((n!=null?(i=n.clipboardData)!=null?i.items:void 0:void 0)!=null)return this.emit("paste",n),t=n.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},t.prototype.handleFiles=function(n){var r,t,u,i;for(i=[],t=0,u=n.length;t<u;t++)r=n[t],i.push(this.addFile(r));return i},t.prototype._addFilesFromItems=function(n){var r,t,u,f,i;for(i=[],u=0,f=n.length;u<f;u++)t=n[u],t.webkitGetAsEntry!=null&&(r=t.webkitGetAsEntry())?r.isFile?i.push(this.addFile(t.getAsFile())):r.isDirectory?i.push(this._addFilesFromDirectory(r,r.name)):i.push(void 0):t.getAsFile!=null?t.kind==null||t.kind==="file"?i.push(this.addFile(t.getAsFile())):i.push(void 0):i.push(void 0);return i},t.prototype._addFilesFromDirectory=function(n,t){var i,r;return i=n.createReader(),r=function(n){return function(i){for(var r,u=0,f=i.length;u<f;u++)r=i[u],r.isFile?r.file(function(i){if(!n.options.ignoreHiddenFiles||i.name.substring(0,1)!==".")return i.fullPath=""+t+"/"+i.name,n.addFile(i)}):r.isDirectory&&n._addFilesFromDirectory(r,""+t+"/"+r.name)}}(this),i.readEntries(r,function(n){if(typeof console!="undefined"&&console!==null)return typeof console.log=="function"?console.log(n):void 0})},t.prototype.accept=function(n,i){return n.size>this.options.maxFilesize*1048576?i(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(n.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(n,this.options.acceptedFiles)?this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(i(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",n)):this.options.accept.call(this,n,i):i(this.options.dictInvalidFileType)},t.prototype.addFile=function(n){return n.upload={progress:0,total:n.size,bytesSent:0},this.files.push(n),n.status=t.ADDED,this.emit("addedfile",n),this._enqueueThumbnail(n),this.accept(n,function(t){return function(i){return i?(n.accepted=!1,t._errorProcessing([n],i)):(n.accepted=!0,t.options.autoQueue&&t.enqueueFile(n)),t._updateMaxFilesReachedClass()}}(this))},t.prototype.enqueueFiles=function(n){for(var i,t=0,r=n.length;t<r;t++)i=n[t],this.enqueueFile(i);return null},t.prototype.enqueueFile=function(n){if(n.status===t.ADDED&&n.accepted===!0){if(n.status=t.QUEUED,this.options.autoProcessQueue)return setTimeout(function(n){return function(){return n.processQueue()}}(this),0)}else throw new Error("This file can't be queued because it has already been processed or was rejected.");},t.prototype._thumbnailQueue=[],t.prototype._processingThumbnail=!1,t.prototype._enqueueThumbnail=function(n){if(this.options.createImageThumbnails&&n.type.match(/image.*/)&&n.size<=this.options.maxThumbnailFilesize*1048576)return this._thumbnailQueue.push(n),setTimeout(function(n){return function(){return n._processThumbnailQueue()}}(this),0)},t.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&this._thumbnailQueue.length!==0)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(n){return function(){return n._processingThumbnail=!1,n._processThumbnailQueue()}}(this))},t.prototype.removeFile=function(n){return n.status===t.UPLOADING&&this.cancelUpload(n),this.files=c(this.files,n),this.emit("removedfile",n),this.files.length===0?this.emit("reset"):void 0},t.prototype.removeAllFiles=function(n){var r,i,f,u;for(n==null&&(n=!1),u=this.files.slice(),i=0,f=u.length;i<f;i++)r=u[i],(r.status!==t.UPLOADING||n)&&this.removeFile(r);return null},t.prototype.createThumbnail=function(n,t){var i;return i=new FileReader,i.onload=function(r){return function(){var u;return u=document.createElement("img"),u.onload=function(){var f,e,i,o,s,c,l,a;return n.width=u.width,n.height=u.height,i=r.options.resize.call(r,n),i.trgWidth==null&&(i.trgWidth=i.optWidth),i.trgHeight==null&&(i.trgHeight=i.optHeight),f=document.createElement("canvas"),e=f.getContext("2d"),f.width=i.trgWidth,f.height=i.trgHeight,h(e,u,(s=i.srcX)!=null?s:0,(c=i.srcY)!=null?c:0,i.srcWidth,i.srcHeight,(l=i.trgX)!=null?l:0,(a=i.trgY)!=null?a:0,i.trgWidth,i.trgHeight),o=f.toDataURL("image/png"),r.emit("thumbnail",n,o),t!=null?t():void 0},u.src=i.result}}(this),i.readAsDataURL(n)},t.prototype.processQueue=function(){var r,t,i,n;if((t=this.options.parallelUploads,i=this.getUploadingFiles().length,r=i,!(i>=t))&&(n=this.getQueuedFiles(),n.length>0)){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,t-i));while(r<t){if(!n.length)return;this.processFile(n.shift());r++}}},t.prototype.processFile=function(n){return this.processFiles([n])},t.prototype.processFiles=function(n){for(var i,r=0,u=n.length;r<u;r++)i=n[r],i.processing=!0,i.status=t.UPLOADING,this.emit("processing",i);return this.options.uploadMultiple&&this.emit("processingmultiple",n),this.uploadFiles(n)},t.prototype._getFilesWithXhr=function(n){var t;return function(){var i,f,r,u;for(r=this.files,u=[],i=0,f=r.length;i<f;i++)t=r[i],t.xhr===n&&u.push(t);return u}.call(this)},t.prototype.cancelUpload=function(n){var r,i,u,f,e,o,s;if(n.status===t.UPLOADING){for(i=this._getFilesWithXhr(n.xhr),u=0,e=i.length;u<e;u++)r=i[u],r.status=t.CANCELED;for(n.xhr.abort(),f=0,o=i.length;f<o;f++)r=i[f],this.emit("canceled",r);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else((s=n.status)===t.ADDED||s===t.QUEUED)&&(n.status=t.CANCELED,this.emit("canceled",n),this.options.uploadMultiple&&this.emit("canceledmultiple",[n]));if(this.options.autoProcessQueue)return this.processQueue()},t.prototype.uploadFile=function(n){return this.uploadFiles([n])},t.prototype.uploadFiles=function(n){var u,f,w,b,ft,l,s,e,k,d,g,nt,et,o,tt,ot,r,a,v,y,p,st,ht,ct,lt,h,at,it,rt,ut,vt,c;for(r=new XMLHttpRequest,a=0,st=n.length;a<st;a++)u=n[a],u.xhr=r;r.open(this.options.method,this.options.url,!0);r.withCredentials=!!this.options.withCredentials;o=null;w=function(t){return function(){var i,e,f;for(f=[],i=0,e=n.length;i<e;i++)u=n[i],f.push(t._errorProcessing(n,o||t.options.dictResponseError.replace("{{statusCode}}",r.status),r));return f}}(this);tt=function(t){return function(i){var s,r,f,e,o,c,l,a,h;if(i!=null)for(r=100*i.loaded/i.total,f=0,c=n.length;f<c;f++)u=n[f],u.upload={progress:r,total:i.total,bytesSent:i.loaded};else{for(s=!0,r=100,e=0,l=n.length;e<l;e++)u=n[e],u.upload.progress===100&&u.upload.bytesSent===u.upload.total||(s=!1),u.upload.progress=r,u.upload.bytesSent=u.upload.total;if(s)return}for(h=[],o=0,a=n.length;o<a;o++)u=n[o],h.push(t.emit("uploadprogress",u,r,u.upload.bytesSent));return h}}(this);r.onload=function(i){return function(u){var f;if(n[0].status!==t.CANCELED&&r.readyState===4){if(o=r.responseText,r.getResponseHeader("content-type")&&~r.getResponseHeader("content-type").indexOf("application/json"))try{o=JSON.parse(o)}catch(e){u=e;o="Invalid JSON response from server."}return tt(),200<=(f=r.status)&&f<300?i._finished(n,o,u):w()}}}(this);r.onerror=function(){return function(){if(n[0].status!==t.CANCELED)return w()}}(this);et=(at=r.upload)!=null?at:r;et.onprogress=tt;l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};this.options.headers&&i(l,this.options.headers);for(b in l)ft=l[b],r.setRequestHeader(b,ft);if(f=new FormData,this.options.params){it=this.options.params;for(g in it)ot=it[g],f.append(g,ot)}for(v=0,ht=n.length;v<ht;v++)u=n[v],this.emit("sending",u,r,f);if(this.options.uploadMultiple&&this.emit("sendingmultiple",n,r,f),this.element.tagName==="FORM")for(rt=this.element.querySelectorAll("input, textarea, select, button"),y=0,ct=rt.length;y<ct;y++)if(e=rt[y],k=e.getAttribute("name"),d=e.getAttribute("type"),e.tagName==="SELECT"&&e.hasAttribute("multiple"))for(ut=e.options,p=0,lt=ut.length;p<lt;p++)nt=ut[p],nt.selected&&f.append(k,nt.value);else(!d||(vt=d.toLowerCase())!=="checkbox"&&vt!=="radio"||e.checked)&&f.append(k,e.value);for(s=h=0,c=n.length-1;0<=c?h<=c:h>=c;s=0<=c?++h:--h)f.append(this._getParamName(s),n[s],n[s].name);return r.send(f)},t.prototype._finished=function(n,i,r){for(var u,f=0,e=n.length;f<e;f++)u=n[f],u.status=t.SUCCESS,this.emit("success",u,i,r),this.emit("complete",u);return this.options.uploadMultiple&&(this.emit("successmultiple",n,i,r),this.emit("completemultiple",n)),this.options.autoProcessQueue?this.processQueue():void 0},t.prototype._errorProcessing=function(n,i,r){for(var u,f=0,e=n.length;f<e;f++)u=n[f],u.status=t.ERROR,this.emit("error",u,i,r),this.emit("complete",u);return this.options.uploadMultiple&&(this.emit("errormultiple",n,i,r),this.emit("completemultiple",n)),this.options.autoProcessQueue?this.processQueue():void 0},t}(f);r.version="3.10.2";r.options={};r.optionsForElement=function(n){if(n.getAttribute("id"))return r.options[e(n.getAttribute("id"))]};r.instances=[];r.forElement=function(n){if(typeof n=="string"&&(n=document.querySelector(n)),(n!=null?n.dropzone:void 0)==null)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return n.dropzone};r.autoDiscover=!0;r.discover=function(){var u,f,n,t,e,i;for(document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],u=function(t){var u,i,f,r;for(r=[],i=0,f=t.length;i<f;i++)u=t[i],/(^| )dropzone($| )/.test(u.className)?r.push(n.push(u)):r.push(void 0);return r},u(document.getElementsByTagName("div")),u(document.getElementsByTagName("form"))),i=[],t=0,e=n.length;t<e;t++)f=n[t],r.optionsForElement(f)!==!1?i.push(new r(f)):i.push(void 0);return i};r.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];r.isBrowserSupported=function(){var n,u,t,f,i;if(n=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){for(i=r.blacklistedBrowsers,t=0,f=i.length;t<f;t++)if(u=i[t],u.test(navigator.userAgent)){n=!1;continue}}else n=!1;else n=!1;return n};c=function(n,t){var r,i,f,u;for(u=[],i=0,f=n.length;i<f;i++)r=n[i],r!==t&&u.push(r);return u};e=function(n){return n.replace(/[\-_](\w)/g,function(n){return n.charAt(1).toUpperCase()})};r.createElement=function(n){var t;return t=document.createElement("div"),t.innerHTML=n,t.childNodes[0]};r.elementInside=function(n,t){if(n===t)return!0;while(n=n.parentNode)if(n===t)return!0;return!1};r.getElement=function(n,t){var i;if(typeof n=="string"?i=document.querySelector(n):n.nodeType!=null&&(i=n),i==null)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i};r.getElements=function(n,t){var h,r,i,u,f,o,s,e;if(n instanceof Array){i=[];try{for(u=0,o=n.length;u<o;u++)r=n[u],i.push(this.getElement(r,t))}catch(c){h=c;i=null}}else if(typeof n=="string")for(i=[],e=document.querySelectorAll(n),f=0,s=e.length;f<s;f++)r=e[f],i.push(r);else n.nodeType!=null&&(i=[n]);if(!(i!=null&&i.length))throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return i};r.confirm=function(n,t,i){return window.confirm(n)?t():i!=null?i():void 0};r.isValidFile=function(n,t){var f,u,i,r,e;if(!t)return!0;for(t=t.split(","),u=n.type,f=u.replace(/\/.*$/,""),r=0,e=t.length;r<e;r++)if(i=t[r],i=i.trim(),i.charAt(0)==="."){if(n.name.toLowerCase().indexOf(i.toLowerCase(),n.name.length-i.length)!==-1)return!0}else if(/\/\*$/.test(i)){if(f===i.replace(/\/.*$/,""))return!0}else if(u===i)return!0;return!1};typeof n!="undefined"&&n!==null&&(n.fn.dropzone=function(n){return this.each(function(){return new r(this,n)})});typeof i!="undefined"&&i!==null?i.exports=r:window.Dropzone=r;r.ADDED="added";r.QUEUED="queued";r.ACCEPTED=r.QUEUED;r.UPLOADING="uploading";r.PROCESSING=r.UPLOADING;r.CANCELED="canceled";r.ERROR="error";r.SUCCESS="success";s=function(n){var s,r,f,h,e,i,c,t,o,u;for(c=n.naturalWidth,i=n.naturalHeight,r=document.createElement("canvas"),r.width=1,r.height=i,f=r.getContext("2d"),f.drawImage(n,0,0),h=f.getImageData(0,0,1,i).data,u=0,e=i,t=i;t>u;)s=h[(t-1)*4+3],s===0?e=t:u=t,t=e+u>>1;return o=t/i,o===0?1:o};h=function(n,t,i,r,u,f,e,o,h,c){var l;return l=s(t),n.drawImage(t,i,r,u,f,e,o,h,c/l)};o=function(n,t){var f,i,e,r,o,u,c,s,h;if(e=!1,h=!0,i=n.document,s=i.documentElement,f=i.addEventListener?"addEventListener":"attachEvent",c=i.addEventListener?"removeEventListener":"detachEvent",u=i.addEventListener?"":"on",r=function(f){if(f.type!=="readystatechange"||i.readyState==="complete")return(f.type==="load"?n:i)[c](u+f.type,r,!1),!e&&(e=!0)?t.call(n,f.type||f):void 0},o=function(){var n;try{s.doScroll("left")}catch(t){n=t;setTimeout(o,50);return}return r("poll")},i.readyState!=="complete"){if(i.createEventObject&&s.doScroll){try{h=!n.frameElement}catch(l){}h&&o()}return i[f](u+"DOMContentLoaded",r,!1),i[f](u+"readystatechange",r,!1),n[f](u+"load",r,!1)}};r._autoDiscoverFunction=function(){if(r.autoDiscover)return r.discover()};o(window,r._autoDiscoverFunction)}.call(this),i.exports});
/*
//# sourceMappingURL=dropzone-amd-module.min.js.map
*/