<?xml version="1.0" encoding="utf-8"?>

<castle>

  <components>

    <component id="MobileServiceManager"
               service="ITJakub.MobileApps.DataContracts.IMobileAppsService, ITJakub.MobileApps.DataContracts"
               type="ITJakub.MobileApps.Core.MobileServiceManager, ITJakub.MobileApps.Core" >
      <parameters>
        <maxAttemptsToSave>#{maxAttemptsToSave}</maxAttemptsToSave>
      </parameters>
      <!--<interceptors>
        <interceptor>${AuthInterceptor}</interceptor>
      </interceptors>-->
    </component>


    <component id="CommunicationTokenManager"
               type="ITJakub.MobileApps.Core.CommunicationTokenManager, ITJakub.MobileApps.Core" >
      <parameters>
        <timeToTokenExpiration>#{timeToTokenExpiration}</timeToTokenExpiration>
      </parameters>
    </component>

    <component id="UserManager"
              type="ITJakub.MobileApps.Core.UserManager, ITJakub.MobileApps.Core" />

    <!--Authentication-->

    <component id="AuthInterceptor"
            service="Castle.DynamicProxy.IInterceptor, Castle.Core"
            type="ITJakub.MobileApps.Core.Authentication.AuthInterceptor, ITJakub.MobileApps.Core"/>



    <component id="AuthenticationManager"
               type="ITJakub.MobileApps.Core.Authentication.AuthenticationManager, ITJakub.MobileApps.Core" >
    </component>

    <component id="AuthProviderDirector"
              type="ITJakub.MobileApps.Core.Authentication.AuthProviderDirector, ITJakub.MobileApps.Core" />


    <component id="GoogleAuthProvider"
              service="ITJakub.MobileApps.Core.Authentication.IAuthProvider"
              type="ITJakub.MobileApps.Core.Authentication.GoogleAuthProvider, ITJakub.MobileApps.Core" >
      <parameters>
        <clientId>#{googleClientId}</clientId>
        <clientSecret>#{googleClientSecret}</clientSecret>
      </parameters>
    </component>

    <component id="FacebookAuthProvider"
             service="ITJakub.MobileApps.Core.Authentication.IAuthProvider"
             type="ITJakub.MobileApps.Core.Authentication.FacebookAuthProvider, ITJakub.MobileApps.Core" >
      <parameters>
        <clientId>#{facebookClientId}</clientId>
        <clientSecret>#{facebookClientSecret}</clientSecret>
      </parameters>
    </component>

    <component id="LiveIdAuthProvider"
          service="ITJakub.MobileApps.Core.Authentication.IAuthProvider"
          type="ITJakub.MobileApps.Core.Authentication.LiveIdAuthProvider, ITJakub.MobileApps.Core" />

    <component id="ItJakubAuthProvider"
             service="ITJakub.MobileApps.Core.Authentication.IAuthProvider"
             type="ITJakub.MobileApps.Core.Authentication.ItJakubAuthProvider, ITJakub.MobileApps.Core" />

    <!-- Profiles for AutoMapper -->

    <component id="InstitutionProfile"
              service="AutoMapper.Profile, AutoMapper"
              type="ITJakub.MobileApps.Core.AutoMapperProfiles.InstitutionProfile, ITJakub.MobileApps.Core" />

    <component id="InstitutionDetailsProfile"
              service="AutoMapper.Profile, AutoMapper"
              type="ITJakub.MobileApps.Core.AutoMapperProfiles.InstitutionDetailsProfile, ITJakub.MobileApps.Core" />
    
    <component id="UserProfile"
          service="AutoMapper.Profile, AutoMapper"
          type="ITJakub.MobileApps.Core.AutoMapperProfiles.UserProfile, ITJakub.MobileApps.Core" />

    <component id="UserDetailsProfile"
             service="AutoMapper.Profile, AutoMapper"
             type="ITJakub.MobileApps.Core.AutoMapperProfiles.UserDetailsProfile, ITJakub.MobileApps.Core" />

    <component id="TaskProfile"
           service="AutoMapper.Profile, AutoMapper"
           type="ITJakub.MobileApps.Core.AutoMapperProfiles.TaskProfile, ITJakub.MobileApps.Core" />

    <component id="TaskDetailsProfile"
              service="AutoMapper.Profile, AutoMapper"
              type="ITJakub.MobileApps.Core.AutoMapperProfiles.TaskDetailsProfile, ITJakub.MobileApps.Core" />

    <component id="SynchronizedObjectProfile"
          service="AutoMapper.Profile, AutoMapper"
          type="ITJakub.MobileApps.Core.AutoMapperProfiles.SynchronizedObjectProfile, ITJakub.MobileApps.Core" />

    <component id="SynchronizedObjectDetailsProfile"
             service="AutoMapper.Profile, AutoMapper"
             type="ITJakub.MobileApps.Core.AutoMapperProfiles.SynchronizedObjectDetailsProfile, ITJakub.MobileApps.Core" />

    <component id="GroupProfile"
            service="AutoMapper.Profile, AutoMapper"
            type="ITJakub.MobileApps.Core.AutoMapperProfiles.GroupProfile, ITJakub.MobileApps.Core" />

    <component id="GroupDetailsProfile"
            service="AutoMapper.Profile, AutoMapper"
            type="ITJakub.MobileApps.Core.AutoMapperProfiles.GroupDetailsProfile, ITJakub.MobileApps.Core" />
    
    
  </components>
</castle>