@using ITJakub.Contracts.Categories
@model ITJakub.MVCWebLayer.ViewModels.CategoriesViewModel 
           
@if (Model.Children.Count() > 0) 
{
    <ul class="nav@(!string.Equals(Model.CategoryId, "taxonomy-historical_text-medieval_czech") ? " show-categories" : "")">
        @foreach (var child in Model.Children)
        {
            Category childAsCat = child as Category;
            if (childAsCat != null)
            {
                <li data-category-id="@childAsCat.Id">
                    @if (childAsCat.HasChildren ||
                        (!string.Equals(child.Id, "taxonomy-dictionary-contemporary") &&
                        !string.Equals(child.Id, "taxonomy-dictionary-historical") && 
                        !string.Equals(child.Id, "taxonomy-scholary_text") &&  
                        !string.Equals(child.Id, "taxonomy-digitized-grammar") && 
                        !string.Equals(child.Id, "taxonomy-card-index")))
                    {
                        <i class="icon-chevron-right"></i>
                    } else {
                        <i class="icon-chevron-right empty"></i>
                    }
                    <label class="checkbox">
                        <input type="checkbox" name="SearchPart" value="@childAsCat.Id" data-id="@childAsCat.Id" data-type="category" data-name="@UppercaseFirst(childAsCat.Name)" /><span>@UppercaseFirst(childAsCat.Name)</span>
                    </label>
                </li>
            }
            Book childAsBook = child as Book;
            if (childAsBook != null)
            {   
                <li data-book-id="@childAsBook.Id">
                    <label class="checkbox">
                        <input type="checkbox" name="SearchPart" value="@childAsBook.Id" data-id="@childAsBook.Id" data-type="book" data-name="@UppercaseFirst(childAsBook.Name)" /><span>@UppercaseFirst(childAsBook.Name)</span>
                    </label>
                </li>
            }
        }
    </ul>
    if (string.Equals(Model.CategoryId, "taxonomy-historical_text-medieval_czech"))
    {
        <div class="category-select">
            <ul class="nav selected-categories"></ul>
            <form class="form-search">
                <input autocomplete="off" type="text" class="input-medium search-query">
                <button type="submit" class="btn"><i class="icon-plus"></i></button>
            </form>
        </div>
    }
}

@functions
{
    string UppercaseFirst(string s)
    {
        return char.ToUpper(s[0]) + s.Substring(1);
    }
}





    